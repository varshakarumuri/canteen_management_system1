{% extends 'base.html' %}
{% block title %}Menu{% endblock %}

{% block navbar %}
<div class="navbar" style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; gap: 24px; margin-bottom: 24px;">
    <div style="font-size: 1.7rem; font-weight: bold; color: #007bff; letter-spacing: 1px;">E-Canteen</div>
    <div style="display: flex; gap: 24px;">
        <a href="{% url 'cart_page' %}" style="font-weight: bold; color: #ff6b6b;">ðŸ›’ Cart ({{ cart_items.count }})</a>
        <a href="{% url 'user_profile' %}">Profile</a>
        <a href="{% url 'change_password' %}">Change Password</a>
        <a href="{% url 'user_logout' %}">Logout</a>
    </div>
</div>
{% endblock %}

{% block content %}
<div>
    <h1 style="display:none;">E-Canteen</h1>
    <hr>
    <h2>Available Items</h2>
    <form method="get" action="" style="margin-bottom:16px; display:flex; gap:8px; align-items:center;">
        <input type="text" name="q" placeholder="Search items by name" value="{{ request.GET.q }}" style="padding:8px; border-radius:6px; border:1px solid #ccc; width:240px;">
        <button type="submit" style="padding:8px 12px; border-radius:6px; background:#007bff; color:#fff; border:none;">Search</button>
        {% if request.GET.q %}
            <a href="{% url 'menu_page' %}" style="margin-left:8px; color:#007bff;">Clear</a>
        {% endif %}
    </form>
    <div class="menu-container">
            {% for item in menu_items %}
                <div class="menu-item">
                    <img src="{{ item.photo.url }}" alt="{{ item.item_name }}" width="150" height="150">
                    <h3>{{ item.item_name }}</h3>
                    <p>Price: â‚¹{{ item.price }}</p>
                    <p>Available: {{ item.quantity }}</p>
                    {% if item.quantity > 0 %}
                        <form method="post" action="{% url 'add_to_cart' item.id %}">
                            {% csrf_token %}
                            <button  type="submit" class="menu-item button">Add to Cart</button>
                        </form>
                    {% else %}
                        <button type="button" disabled style="background: #ccc; color: #fff; cursor: not-allowed;" class="menu-item button">Out of Stock</button>
                    {% endif %}
                </div>
            {% empty %}
                <p>No items available.</p>
            {% endfor %}
        </div>
</div>
{% endblock %}




